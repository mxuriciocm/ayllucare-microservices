# ===============================================
# ANAMNESIS-LLM MICROSERVICE CONFIGURATION
# AylluCare/B4U Platform - Rural Digital Health
# ===============================================

# Application
spring.application.name=microservice-anamnesis
server.port=8093

# ===============================================
# DATABASE CONFIGURATION (MySQL)
# ===============================================
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.url=jdbc:mysql://localhost:3306/anamnesis_db?createDatabaseIfNotExist=true
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.web=INFO
logging.level.com.microservice.anamnesis=DEBUG
logging.level.root=INFO
# ===============================================
# LOGGING CONFIGURATION
# ===============================================

api.version=1.0.0
api.description=Anamnesis-LLM Service API for AylluCare/B4U Platform - Manages conversational medical interviews with AI
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.api-docs.path=/v3/api-docs
# ===============================================
# OPENAPI / SWAGGER CONFIGURATION
# ===============================================

management.endpoint.health.show-details=when-authorized
management.endpoints.web.exposure.include=health,info,metrics
# ===============================================
# ACTUATOR CONFIGURATION
# ===============================================

spring.config.import=optional:configserver:http://localhost:8888
# ===============================================
# CONFIG SERVER (Optional)
# ===============================================

eureka.client.fetch-registry=true
eureka.client.register-with-eureka=true
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/
eureka.instance.hostname=localhost
# ===============================================
# EUREKA CLIENT CONFIGURATION
# ===============================================

services.profile.url=http://microservice-profiles
# ===============================================
# EXTERNAL SERVICES
# ===============================================

# ===============================================
# LLM CONFIGURATION (OpenAI / Google Gemini)
# ===============================================
# Choose your LLM provider: openai | gemini
llm.provider=gemini

# -----------------------------------------------
# OPTION 1: OpenAI GPT (Paid, high quality)
# -----------------------------------------------
# Get API key from: https://platform.openai.com/api-keys
# Models: gpt-4o (recommended), gpt-4-turbo-preview, gpt-4, gpt-3.5-turbo
# Costs: ~$0.006 per anamnesis with gpt-4o

openai.enabled=false
openai.api.key=
openai.model=gpt-4o
openai.max.tokens=1000
openai.temperature=0.7

# -----------------------------------------------
# OPTION 2: Google Gemini (FREE tier available!) ?
# -----------------------------------------------
# Get API key from: https://makersuite.google.com/app/apikey
# Models: gemini-pro (GRATIS!), gemini-1.5-pro, gemini-ultra
# Free tier: 60 requests/minute, 1,500/day, 1M tokens/month
# Costs: $0.00 per anamnesis with gemini-pro FREE tier

gemini.enabled=true
gemini.api.key=AIzaSyCjIVidoDrdxl2dSmgYOkTV78FxyBsU6R4
gemini.model=gemini-2.0-flash
gemini.max.tokens=1000
gemini.temperature=0.7

# Environment variables (recommended for production):
# export LLM_PROVIDER=gemini
# export GEMINI_API_KEY=AIza...
# export GEMINI_MODEL=gemini-pro

authorization.jwt.secret=AylluCare2024SecretKeyForJWTSigningMustBeAtLeast256BitsLongForHS256Algorithm
# ===============================================
# JWT SECURITY CONFIGURATION
# ===============================================

spring.cloud.stream.rabbit.bindings.anamnesisSessionCompleted-out-0.producer.routing-key-expression='anamnesis.session.completed'
spring.cloud.stream.rabbit.bindings.anamnesisSummaryCreated-out-0.producer.routing-key-expression='anamnesis.summary.created'
# RabbitMQ specific configuration

spring.cloud.stream.bindings.anamnesisSessionCompleted-out-0.group=anamnesis-service
spring.cloud.stream.bindings.anamnesisSessionCompleted-out-0.content-type=application/json
spring.cloud.stream.bindings.anamnesisSessionCompleted-out-0.destination=anamnesis.events

spring.cloud.stream.bindings.anamnesisSummaryCreated-out-0.group=anamnesis-service
spring.cloud.stream.bindings.anamnesisSummaryCreated-out-0.content-type=application/json
spring.cloud.stream.bindings.anamnesisSummaryCreated-out-0.destination=anamnesis.events
# Spring Cloud Stream bindings

spring.rabbitmq.password=guest
spring.rabbitmq.username=guest
spring.rabbitmq.port=5672
spring.rabbitmq.host=localhost
# ===============================================
# RABBITMQ CONFIGURATION
# ===============================================

spring.data.jpa.repositories.bootstrap-mode=default
spring.jpa.properties.hibernate.enable_lazy_load_no_trans=true
# JPA Auditing

spring.jpa.properties.hibernate.physical_naming_strategy=com.microservice.anamnesis.shared.infrastructure.persistence.jpa.configuration.strategy.SnakeCaseWithPluralizedTablePhysicalNamingStrategy
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.show-sql=false
spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect
spring.jpa.database=mysql
spring.jpa.hibernate.ddl-auto=update
# JPA/Hibernate

spring.datasource.password=Karlam030879@
spring.datasource.username=root
